# M3 Milestone (In Progress)

## Scope Target

- Turkish TTS synthesis from M2 translation output
- Basic duration-fit checks for dubbing timeline compatibility
- M3 QA report and acceptance gate

## Implemented So Far

- `prepare-m3` CLI command to convert M2 translation output into M3 TTS input contract
- `run-m3` CLI command to synthesize per-segment WAV output + M3 QA report
- `benchmark-m3` CLI command to compare multiple M3 profiles on same TTS input
- `report-m3-tuning` CLI command to generate markdown tuning summary from M3 benchmark
- `ui-demo` CLI command to test M3 backend flow via local web UI
- TTS backend abstraction:
  - `mock` backend (local sine-wave placeholder synthesis for pipeline validation)
  - `espeak` backend (local real synthesis, API-free)
- `espeak` backend duration-fit iyilestirmesi:
  - adaptive speaking-rate retry loop (`espeak_adaptive_rate_*` config alanlari)
- M3 QA checks:
  - duration tolerance delta (`max_duration_delta_seconds`)
  - empty target text detection
- Optional M3 QA acceptance gate:
  - `tts.qa_fail_on_flags`
  - `tts.qa_allowed_flags`
- Output artifacts:
  - `output/tts/tts_input.tr.json`
  - `output/tts/tts_output.tr.json`
  - `output/tts/segments/seg_XXXXXX.wav`
  - `output/tts/tts_preview_stitched.tr.wav`
  - `output/qa/m3_qa_report.json`
  - `run_m3_manifest.json`
  - `benchmarks/m3_profile_benchmark.json`
  - `benchmarks/m3_tuning_report.md`

## CLI Entry

```bash
video-translate prepare-m3 --run-root runs/m1_YYYYMMDD_HHMMSS
video-translate run-m3 --run-root runs/m1_YYYYMMDD_HHMMSS
video-translate benchmark-m3 --run-root runs/m1_YYYYMMDD_HHMMSS
video-translate report-m3-tuning --run-root runs/m1_YYYYMMDD_HHMMSS
video-translate ui-demo --host 127.0.0.1 --port 8765
```

## Next M3 Steps

- Tune `espeak` voice/rate/pitch profiles with real sample set
- Segment-level pause shaping / micro-timing heuristics for tighter rhythm
